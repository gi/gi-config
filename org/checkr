#!/usr/bin/env zsh

file="${(%):-%x}"
root="$(cd "$(dirname "${file}")/../" && pwd)"

################################################################################
# Shell
################################################################################
"${root}/shell/zsh/configure"

################################################################################
# Home
################################################################################
"${root}/home"

################################################################################
# Xcode CLI Tools
################################################################################
xcode-select --install

################################################################################
# Homebrew
################################################################################
"${root}/homebrew/install"

brew install gpg
brew install openssl

################################################################################
# ASDF Tools Manager
################################################################################
cat <<EOF >> "${ZDOTDIR:-${HOME}}/.zshrc"

################################################################################
# ASDF Tool Manager
################################################################################
export ASDF_CONFIG_FILE="${HOME}/.config/asdf"
export ASDF_DATA_DIR="${HOME}/.local/share/asdf"
source "$(brew --prefix asdf)/asdf.sh"
EOF

source "${ZDOTDIR:-${HOME}}/.zshrc"

brew install asdf
asdf plugin-add ruby
asdf plugin-add golang
asdf plugin-add nodejs
asdf plugin-add python

bash "${ASDF_DATA_DIR}/plugins/nodejs/bin/import-release-team-keyring"

cat <<EOF > "${ASDF_CONFIG_FILE}"
legacy_version_file = yes
EOF

################################################################################
# Ruby Bundler
################################################################################
cat <<EOF >> "${ZDOTDIR:-${HOME}}/.zshrc"

################################################################################
# Ruby Bundler
################################################################################
export BUNDLE_USER_CACHE=~/.cache/bundle
export BUNDLE_USER_CONFIG=~/.config/bundle
export BUNDLE_USER_HOME=~/.local/share/bundle
export BUNDLE_GEM__FURY__IO=
EOF

################################################################################
# Teleport
################################################################################
cat <<EOF >> "${ZDOTDIR:-${HOME}}/.zshrc"

################################################################################
# Teleport
################################################################################
export TSH_USER="${USER}@checkr.com"
EOF

################################################################################
# Puma Dev
################################################################################
